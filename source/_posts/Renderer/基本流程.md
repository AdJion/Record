---
title: 渲染基本流程
date: 2020-05-08 11:41:32
categories:
-  Renderer
tags:
- Renderer
---

# 基本流程
* 开发准备流程
> * 1:搭建场景,添加摄像机,添加光源,设置摄像机,设置光源.
> * 2:剔除无需渲染的物体,包括不限于 2D 物体,3D 物体 
> * 3:设置物体的渲染状态,包括不限于设置材质,纹理,shader 等


* 电脑 CPU 运行流程
> * 1:准备数据,上面开发准备流程最后会在CPU中生成几何信息,一般叫做"渲染图元",几何信息就是 点,线,面 的数据.会将这些数据加载到系统内存(Random Access Memory,RAM)
> * 2:准备数据,将设置的渲染状态也读进内存中.渲染状态定义了场景内的网格是怎样被渲染的.比如:设置顶点着色器/片元着色器,光源,材质,纹理等,动态修改渲染状态等.
> * 3:CPU 向 GPU 发送 DrawCall 命令,开始渲染.这个命令指向一个等待被渲染的图元列表(就是点线面数据,不包含渲染状态).GPU 会拿到渲染状态和图元列表进行渲染成像.
> * 其他知识:一般情况下,DrawCall命令,不应该频繁,unity 官方设定固定时间内 250 个以下.DrawCall命令指向的图元列表不应该过多,这个也是应该注意的.


* 电脑GPU运行流程
> * -->1:GPU 将对这些几何数据进行处理,会输出下一个阶段需要的信息.比如会将顶点坐标转换到屏幕空间中,输出一些二维顶点坐标,每个顶点对应的深度值,着色等信息.一般叫做"几何阶段"
>> * -->1:顶点着色器.(由顶点数据传入,传出顶点数据,这些数据可能被增加或者被删减).
>> * -->2:曲面细分着色器
>> * -->3:几何着色器
>> * -->4:裁剪
>> * -->5:屏幕映射
> * -->2:将上一阶段生成的数据,用来生产屏幕上的像素,渲染出最终的图像.一般叫做"光栅化阶段"
>> * -->1:三角形设置
>> * -->2:三角形遍历
>> * -->3:片元着色器
>> * -->4:逐片元操作
> * -->3:生成最终的屏幕2D图像
> * 其他知识:一般情况下,网格和纹理等数据会被加载到显卡上的存储空间,显存(Video Random Access Memory,VRAM),这是由于在显存上面读取数据比在内存读取数据渲染更快.
# GPU流水线

